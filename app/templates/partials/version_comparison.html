<div class="version-comparison">
    <div class="comparison-header">
        <h3>Comparing v{{ version.version_number }} with Current (v{{ word.current_version }})</h3>
        <button class="small outline" onclick="this.closest('.version-comparison').remove()">Close</button>
    </div>

    {% if not diff %}
    <p class="diff-match">No differences found between this version and current.</p>
    {% else %}
    <table class="diff-table">
        <thead>
            <tr>
                <th>Field</th>
                <th>v{{ version.version_number }} (Old)</th>
                <th>Current</th>
            </tr>
        </thead>
        <tbody>
            {% for field, values in diff.items() %}
            <tr>
                <td><strong>{{ field | replace('_', ' ') | title }}</strong></td>
                <td class="diff-old">
                    {% if field == 'translations' %}
                        {{ values.old | join(', ') if values.old else '(empty)' }}
                    {% else %}
                        {{ values.old or '(empty)' }}
                    {% endif %}
                </td>
                <td class="diff-new">
                    {% if field == 'translations' %}
                        {{ values.current | join(', ') if values.current else '(empty)' }}
                    {% else %}
                        {{ values.current or '(empty)' }}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}

    <div class="comparison-meta">
        <small>Version {{ version.version_number }} created: {{ version.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</small>
    </div>
</div>
